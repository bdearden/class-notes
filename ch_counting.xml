<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="ch_counting">
  <title>Counting Techniques</title>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-basics">
    <title>
      Counting basics
    </title>

    <p> 1, 2, 3, 4, ... </p>

    <!-- <!-\- the following comes from https://github.com/oscarlevin/discrete-book -\-> -->
    <!-- <exercise> -->
    <!--   <statement> -->
    <!--     <p> -->
    <!--       The game TENZI comes with 40 six-sided dice (each numbered 1 to 6). Suppose you roll all 40 dice. -->
    <!--       <ol> -->
    <!--         <li> Prove that there will be at least seven dice that land on the same number.</li> -->
    <!--         <li> -->
    <!--           <p> -->
    <!--             How many dice would you have to roll before you were guaranteed that some four of them would all match or all be different? Prove your answer. -->
    <!--           </p> -->
    <!--         </li> -->
    <!--       </ol> -->
    <!--     </p> -->
    <!--   </statement> -->
    <!--   <solution> -->
    <!--     <p> -->
    <!--       <ol> -->
    <!--         <li> -->
    <!--           <p> -->
    <!--             This is an example of the pigeonhole principle. We can prove it by contrapositive. -->
    <!--           </p> -->

    <!--           <proof> -->
    <!--             <p> -->
    <!--               Suppose that each number only came up 6 or fewer times. So there are at most six 1's, six 2's, and so on. That's a total of 36 dice, so you must not have rolled all 40 dice. -->
    <!--             </p> -->
    <!--           </proof> -->
    <!--         </li> -->

    <!--         <li> -->
    <!--           <p> -->
    <!--             We can have 9 dice without any four matching or any four being all different: three 1's, three 2's, three 3's. We will prove that whenever you roll 10 dice, you will always get four matching or all being different. -->
    <!--           </p> -->

    <!--           <proof> -->
    <!--             <p> -->
    <!--               Suppose you roll 10 dice, but that there are NOT four matching rolls. This means at most, there are three of any given value. If we only had three different values, that would be only 9 dice, so there must be 4 different values, giving 4 dice that are all different. -->
    <!--             </p> -->
    <!--           </proof> -->
    <!--         </li> -->
    <!--       </ol> -->
    <!--     </p> -->
    <!--   </solution> -->
    <!-- </exercise> -->
  </section>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-combperm">
    <title>
      Combinations and Permutations
    </title>
  </section>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-binomial">
    <title>
      The Binomial Theorem and Binomial Coefficients
    </title>

    <exercises>
      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Use induction to prove that <m>\d\sum_{k=0}^n {n \choose k} = 2^n</m>. That is, the sum of the <m>n</m>th row of Pascal's Triangle is <m>2^n</m>.
          </p>
        </statement>

      </exercise>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Use induction to prove <m>{4 \choose 0} + {5 \choose 1} + {6 \choose 2} + \cdots + {4+n \choose n} = {5+n \choose n}</m>. (This is an example of the hockey stick theorem.)
          </p>
        </statement>

      </exercise>
    </exercises>

  </section>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-starsandbars">
    <title>
      Counting with Stars and Bars
    </title>
  </section>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-morepie">
    <title>
      Counting with the Principle of Inclusion/Exclusion
    </title>
  </section>


  <section xml:id="section-counting-fib">
    <title>
      A surprise connection - Counting Fibonacci numbers

    </title>

    <example>
      <statement>
        <p>
          Let's imagine that you have a rectangular grid of blank spaces. How many ways can you tile that grid using either square tiles or two-square-wide dominos.
        </p>
        <p>
          We will define an <term><m>n</m>-board</term> to be a rectangular grid of <m>n</m> spaces. 
        </p>
        <p>
          For example, here are all of the possible tilings for a 4-board:
        </p>
        <sidebyside width="50%">
          <image xml:id="tilings-of-4board">
            <latex-image>
              % tilings of a 4 board:
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick] (0,0) rectangle (4,1);
              \node[right] at (4.5,0.5) {4 squares};
              \end{tikzpicture}
              
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=gray!30] (0,0) rectangle (2,1);
              \draw[thick] (0,0) rectangle (4,1);
              \node[right] at (4.5,0.5) {1 domino, 2 squares};
              \end{tikzpicture}
              
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=gray!30] (1,0) rectangle (3,1);
              \draw[thick] (0,0) rectangle (4,1);
              \node[right] at (4.5,0.5) {square, domino, square};
              \end{tikzpicture}
              
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=gray!30] (2,0) rectangle (4,1);
              \draw[thick] (0,0) rectangle (4,1);
              \node[right] at (4.5,0.5) {2 squares, 1 domino};
              \end{tikzpicture}
              
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=gray!30] (0,0) rectangle (2,1);
              \draw[thick,fill=gray!30] (2,0) rectangle (4,1);
              \draw[thick] (0,0) rectangle (4,1);
              \node[right] at (4.5,0.5) {2 dominoes};
              \end{tikzpicture}
            </latex-image>
          </image>

        </sidebyside>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          In how many ways can you tile a 5-board? 
        </p>
      </statement>
      <solution>
        <p>
          Let's turn this into an easier problem. We know that a 5-board is just a 4-board with an extra space. How many ways are there to tile this? We know that there are 5 ways to tile a 4-board, so add an extra square. There's 5 ways to do this. 
        </p>
        <p>
          ... but a 5-board is also a 3-board with an extra two spaces at the end. How many ways can we tile this? Well, there are 3 ways to tile the three board, and we just add a domino. 
        </p>
        <p>
          These two subdivisions are mutually exclusive (if we added a square to the 3-board, that's turned it into the 4-board case above). So we can conclude the number of ways to tile a 5-board is 5+3 = 8.
        </p>
        
        <p>
          <image xml:id="tiling-5-board">
            <latex-image>
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2,3}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=white!20] (0,0) rectangle (5,1);
              \node[thick,fill=white!20] at (2.5,0.5) {5-board};
              \draw[thick] (0,0) rectangle (5,1);
              \end{tikzpicture}
              \begin{tikzpicture}[scale=1.0]
              \draw[draw opacity=0, fill opacity=0] (0,0) rectangle (1,1);  % draw invisible box to center = 
              \node[thick] at (0.5,0.5) {$=$};
              \end{tikzpicture}
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2,3}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=white!20] (0,0) rectangle (4,1);
              \node[thick,fill=white!20] at (2,0.5) {4-board};
              \draw[thick] (0,0) rectangle (5,1);
              \end{tikzpicture}
              \begin{tikzpicture}[scale=1.0]
              \draw[draw opacity=0, fill opacity=0] (0,0) rectangle (1,1);
              \node[thick] at (0.5,0.5) {$+$};
              \end{tikzpicture}
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2,3}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=white!20] (0,0) rectangle (3,1);
              \node[thick,fill=white!20] at (1.5,0.5) {3-board};
              \draw[thick,fill=gray!30] (3,0) rectangle (5,1);
              \draw[thick] (0,0) rectangle (5,1);
              \end{tikzpicture}
            </latex-image>
          </image>
        </p>
      </solution>
    </example>
   
    <theorem>
      <statement>
        <p>
          Let <m>f_n</m> denote the number of tilings for an <m>n</m>-board.  Then <m>f_0=1</m> (there is one way to tile a 0 board - you don't do it), and <m>f_1=1</m>, and for <m>n \ge 2</m>
          <me>
            f_{n+1} = f_{n} + f_{n-1}
          </me>
        </p>
      </statement>
      <proof>
        <p>
          In an <m>n+1</m>-board, there are <m>f_n</m> ways to tile the first <m>n</m> tiles followed by one square, and there are <m>f_{n-1}</m> to tile the first <m>n-1</m> tiles, followed by a domino. These tilings are disjoint events, and thus <m>f_{n+1} = f_{n} + f_{n-1}</m>.
        </p>
      </proof>
    </theorem>


    <corollary>
      <statement>
        <p>
          Let <m>F_n</m> by the <m>n</m>th Fibonacci number. Then <m>f_n = F_{n-1}</m> (where we'll make the notational convention that <m>F_{-1}=0</m> so our positive indices can match).
        </p>
      </statement>
    </corollary>


    <p>
      Let's put this to use to verify some Fibonacci identities using combinatorial proof
    </p>

    <example>
      <statement>
        <p>
          Prove that <m>f_1 + f_3 + f_5 + \dots + f_{2n-1} = f_{2n} - 1</m> using a combinatorial argument.
        </p>
      </statement>
      <hint>
        Condition on the location of the last square.
      </hint>
    </example>

    <example>
      <statement>
        <p>
          Prove that <m>f_n^2 + f_{n+1}^2 = f_{2n+2}</m> using a combinatorial argument.
        </p>
      </statement>
      <hint>
        Condition on the breakability of the <m>n+1</m>st space.
      </hint>
    </example>



  </section>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-morecounting">

    <title>

    </title>

    <exercises>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Find the largest number of points which a football team cannot get exactly using just 3-point field goals and 7-point touchdowns (ignore the possibilities of safeties, missed extra points, and two point conversions). Prove your answer is correct by mathematical induction.
          </p>
        </statement>

      </exercise>

    </exercises>
  </section>
</chapter>

