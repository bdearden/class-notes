<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="ch_numtheory">
  <title>Some Classic Number Theory</title>

  <section xml:id="section-numtheory-divcong">
    <title> Divisibility and Congruences </title>

    <note>
      <statement>
        <p>
          Any time we say <q>number</q> in the context of divides, congruence, or <q>number theory</q> we mean integer.
        </p>
      </statement>
    </note>

    <subsection xml:id="section-numtheory-div">
      <title>The Divisibility Relation</title>

      <definition>
        <statement>
          <p>
            Let <m>a \and b</m> be two integers with <m>a \not= 0</m>. We say <term><m>a</m> divides <m>b</m></term> and write <m>a \divides b</m> if there exists an integer <m>m</m> such that <m>b = am</m>.
          </p>
          <p>
            We say that <m>a</m> is a <term>factor</term> of <m>b</m>, and <m>b</m> is a <term>multiple</term> of <m>a</m>.
          </p>
        </statement>
      </definition>

      <example>
        <statement>
          <p>
            The following are examples of the divides relation:
            <ol>
              <li> <m>3 \divides 6</m> since <m>6 = 3\cdot 2</m> </li>
              <li> <m>4 \divides 100</m> since <m>100 = 4 \cdot 25</m></li>
            </ol>
          </p>
          <p>
            Here are some non-examples:
            <ol>
              <li> <m>4 \not \divides 10</m> since there is no integer <m>m</m> for which <m>10 = 4m</m>.</li>
              <li><m> 6 \not \divides 3 </m>. Order matters.</li>
            </ol>
          </p>
        </statement>
      </example>


      <theorem>
        <title> Properties of divisibility</title>
        <statement>
          <p>
            Let <m>a, b, c \in \Z</m> with <m>a \not= 0</m>. Then:
            <ol>
              <li> If <m>a \divides b</m> and <m>a \divides c</m> then <m>a \divides ( b + c ) </m>. </li>
              <li> If <m>a \divides b</m> then <m>a \divides bc</m> for all <m>c\in \Z</m>. </li>
              <li> If <m>a \divides b</m> and <m>b \divides c</m> then <m>a \divides c </m>. </li>
            </ol>
          </p>
        </statement>
      </theorem>


      <corollary>
        <statement>
          <p>
            If <m>a, b, c\in \Z</m> with <m>a\not= 0</m> such that <m>a\divides b</m> and <m>a \divides c</m>, then <m>{ a\divides (bm+cn)}</m> where <m>m \and n</m> are some integers.
          </p>
        </statement>
      </corollary>



      <theorem>
        <title>The Division Algorithm</title>
        <statement>
          <p>
            Let <m>a</m> be an integer and <m>d</m> be a positive integer.  Then there exist unique integers <m>q \and r</m> such that
            <me>a = dq + r \hspace{1em} \text{with} \hspace{1em} 0\le r \lt d</me>
          </p>
        </statement>
      </theorem>


      <example>
        <statement>
          <p>
            Use the Division Algorithm to write each division as <m>a = dq +r</m> with <m>0 \le r \lt d</m>, with the variables defined in the statement above.
            <ol>
              <li> <m>543 \div 7</m> </li>
              <li> <m>-42 \div 13</m> </li>
            </ol>
          </p>
        </statement>
      </example>


    </subsection>

    <subsection xml:id="section-numtheory-cong">
      <title> Congruence </title>

      <definition>
        <statement>
          <p>
            Let <m>a \and b</m> be two integers and <m>m</m> be a positive integer. We say that <term><m>a</m> is congruent to <m>b</m> modulo <m>n</m></term> if <me>n \divides (b-a)</me>
          </p>
          <p>
            We write <m>a \equiv b \pmod m</m>
          </p>
          <p>
            We call <m>m</m> the <term>modulus</term>.
          </p>
        </statement>
      </definition>

      <example>
        <statement>
          <p>
            <ol>
              <li> <m>13 \equiv 6 \pmod 7 </m> </li>
              <li> <m>-8 \equiv 6 \pmod 7 </m> </li>
              <li> <m>7 \equiv 0 \pmod 7</m></li>
            </ol>
          </p>
        </statement>
      </example>

      <definition>
        <statement>
          <p>
            If <m>a</m> is an integer and <m>m</m> is a positive integer, we define the <term>congruence class of <m>a</m> modulo <m>m</m></term> to be the set of all integers congruent to <m>a</m> modulo <m>m</m>. 
            <me> \left[ a \right]_m = \left\{ b \mid b \equiv a \pmod m \right\}</me>
          </p>
        </statement>
      </definition>

      <example>
        <statement>
          <p>
            What congruence class is indicated by the set:
            <ol>
              <li> <m>\left{\dots, -6, -1, 4, 9, 14, \dots\} </li>
              <li> <m>\left{\dots, -13, 20, 53, 86, \dots \} </li>
            </ol>
          </p>
        </statement>
      </example>


      <example>
        <statement>
          <p>
            Find all congruence classes modulo 5.
          </p>
        </statement>
      </example>




      <note>
        <p>
          Since <m>n\divides (b-a)</m> is equivalent to the statement that there exists some integer <m>m</m> such that
          <md>
            <mrow> a-b &amp;= mn </mrow>
            <mrow> a &amp;= mn + b </mrow>
          </md>
          we can say that <m>a</m> is congruent to <m>b</m> modulo <m>n</m> if <m>a</m> and <m>b</m> have the same remainder when divided by <m>n</m>. 
          % TODO clean up this statement and provide a proof or indicate that a proof is needed.
        </p>
      </note>


      <!-- TODO include a proof by induction of the division algorithm by induction -->


    </subsection>


    <exercises>

      <!-- the following is adapted from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Prove that 6 divides <m>7^n - 1</m> for all <m>n \in \N</m>.
          </p>
        </statement>
        <hint>
          Use induction
        </hint>
        <solution>

          <proof>
            <p>
              Let <m>P(n)</m> be the statement <q>6 divides <m>7^n - 1</m>.</q> We will show <m>P(n)</m> is true for all <m>n \in \N</m>. First we establish the base case, <m>P(0)</m>. Since <m>7^0 - 1 = 0</m>, and <m>0</m> is a multiple of 6, <m>P(0)</m> is true. Now for the inductive case. Assume <m>P(k)</m> holds for an arbitrary <m>k \in \N</m>. That is, 6 divides <m>7^k - 1</m>, or in other words, <m>7^k - 1 = 6j</m> for some integer <m>j</m>. Now consider <m>7^{k+1} - 1</m>:
              <md>
                <mrow> 7^{k+1} - 1 ~ \amp = 7^{k+1} - 7 + 6 \amp \text{by cleverness:} -1 = -7 + 6</mrow>
                <mrow> \amp = 7(7^k - 1) + 6 \amp \text{factor out a 7 from the first two terms}</mrow>
                <mrow> \amp = 7(6j) + 6 \amp \text{by the inductive hypothesis}</mrow>
                <mrow> \amp = 6(7j + 1) \amp \text{factor out a 6}</mrow>
              </md>
            </p>

            <p>
              Therefore 6 divides <m>7^{k+1} - 1</m>, or in other words, <m>P(k+1)</m> is true. Therefore by the principle of mathematical induction, <m>P(n)</m> is true for all <m>n \in \N</m>.
            </p>
          </proof>

        </solution>
      </exercise>

    </exercises>

</section>

<xi:include href="./sec_numtheory_modularexp.xml"/>

<section xml:id="section-numtheory-euclid">
  <title>The Euclidean Algorithm and Applications</title>

  <subsection xml:id="extended-euclidean-algorithm">
    <title>
      The Extended Euclidean Algorithm
    </title>


    <definition xml:id="def-bezout-coefficient">
      TODO
    </definition>
  </subsection>

</section>


<xi:include href="./sec_numtheory_encryption.xml"/>


</chapter>

